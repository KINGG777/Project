# Install required dependencies
yum install -y yum-utils

# Add Docker repository
yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo

# Install Docker
yum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

# Start and enable Docker
systemctl enable --now docker

# Verify installation
docker --version



#kebectl on gcp centos

curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/arm64/kubectl"
chmod +x kubectl
sudo mv kubectl /usr/local/bin/

#gke ckuster creation

gcloud container clusters create kingg-cluster --zone us-central1 --machine-type e2-standard-4 --num-nodes 3 --enable-ip-alias

Or

gcloud container clusters create kingg \
  --region=us-central1 \
  --num-nodes=2 \
  --machine-type=e2-standard-2 \
  --enable-autoscaling \
  --min-nodes=1 \
  --max-nodes=3 \
  --disk-size=50GB \
  --enable-ip-alias
#kubectl installation and auth plugin
sudo yum install kubectl -y
sudo yum install -y google-cloud-sdk-gke-gcloud-auth-plugin

#Add Jenkins user to docker group

sudo usermod -aG docker jenkins
sudo systemctl restart jenkins
sudo systemctl restart docker

#Argocd installation on kubernates
kubectl create namespace argocd
kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
#edit clusterip with LB
kubectl edit svc argocd-server -n argocd
kubectl get svc -n argocd
#Get argocd password
kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 --decode

